{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,MAAM,QAAQ,SAAR,CAAV;AACA,IAAI,MAAJ,CAAW,MAAX,CAAkB,EAAC,QAAO,WAAR,EAAlB;;;AAGA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,UAAU,GAAG,YAAH,CAAgB,iBAAhB,CAAd;AACA,IAAI,OAAO,KAAK,KAAL,CAAW,OAAX,CAAX;AACA,IAAI,WAAW,KAAK,QAApB;AACA,QAAQ,GAAR,CAAY,aAAZ,EAA2B,QAA3B;;;;AAIA,QAAQ,OAAR,GAAkB,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,KAA8B;;;;AAI5C,QAAI,iBAAiB,IAArB;AACA,QAAI,QAAQ,IAAZ;;AAEA,YAAQ,GAAR,CAAY,UAAZ;AACA,YAAQ,GAAR,CAAY,MAAM,OAAlB;;AAEA,UAAM,OAAN,CAAc,OAAd,CAAuB,MAAD,IAAY;AAC9B,gBAAQ,GAAR,CAAY,gBAAgB,OAAO,OAAnC;AACA,gBAAQ,GAAR,CAAY,kBAAkB,OAAO,SAArC;;;AAGJ,yBAAiB,OAAO,QAAP,CAAgB,QAAhB,CAAyB,cAAzB,CAAwC,CAAzD;AACH,KANG;;;AASA,QAAG,kBAAkB,EAArB,EAAwB;AACpB,gBAAQ,OAAR;AACH,KAFD,MAGI;AACA,gBAAQ,KAAR;AACH;AACD,YAAQ,GAAR,CAAY,aAAa,KAAzB;;;;AAIA,YAAQ,GAAR,CAAY,eAAZ;AACA,YAAQ,qCAAqC,MAArC,GAA6C,KAA7C,GAAqD,YAArD,GAAoE,QAA5E,EAAsF,UAAU,KAAV,EAAiB,QAAjB,EAA2B,IAA3B,EAAiC;AAC/G,gBAAQ,GAAR,CAAY,sBAAZ,EAAoC,SAAS,UAA7C;AACA,gBAAQ,GAAR,CAAY,wBAAZ,EAAsC,IAAtC;AACH,KAHL;AAKA,YAAQ,GAAR,CAAY,qCAAqC,MAArC,GAA6C,KAA7C,GAAqD,YAArD,GAAoE,QAAhF;AACH,CApCD","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar request = require('request');\nvar AWS = require('aws-sdk');\nAWS.config.update({region:'us-east-1'});\n\n// To replace with asych file read\nvar fs = require(\"fs\");\nvar content = fs.readFileSync(\"configdata.json\");\nvar json = JSON.parse(content);\nvar IFTTTkey = json.iftttkey;\nconsole.log(\"IFTTTKey:  \", IFTTTkey);\n\n//TODO logic isnt working to write out dynamo event.  but IFTT  works\n//HANDLE DYNAMODB EVENT\nexports.handler = (event, context, callback) => {\n    //READ FROM DYNAMODB UPDATE\n    //console.log('Received event:', JSON.stringify(event, null, 2));\n\n    var passPercentage = null;\n    var color = null;\n\n    console.log('RECORD :');\n    console.log(event.Records);\n\n    event.Records.forEach((record) => {\n        console.log('RECORD ID: ' + record.eventID);\n        console.log('EVENT NAME:  ' + record.eventName);\n        //console.log('PASS PERCENTAGE:  ' + record.dynamodb.NewImage.passpercentage.S)\n     //console.log('RECORD JSON: %j', record.dynamodb);\n    passPercentage = record.dynamodb.NewImage.passpercentage.S\n});\n\n    //COLOR LOGIC\n    if(passPercentage >= 80){\n        color = \"GREEN\";\n    }\n    else{\n        color = \"RED\";\n    }\n    console.log(\"COLOR:  \" + color);\n\n    //IFTTT\n    //console.log(\"Received AWS Button event: \" + event.clickType + \". Firing IFTTT Maker Trigger...\");\n    console.log(\"SEND TO IFTTT\");\n    request('https://maker.ifttt.com/trigger/' + 'AWS-'+ color + '/with/key/' + IFTTTkey, function (error, response, body) {\n            console.log(\"Complete! Response: \", response.statusCode);\n            console.log(\"IFTTT RESPONSE BODY:  \", body);\n        }\n    )\n    console.log('https://maker.ifttt.com/trigger/' + 'AWS-'+ color + '/with/key/' + IFTTTkey);\n};\n"]}